<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ€ ä¿ºã®å¤šå±¤åœ°ç„JSé›£èª­åŒ–ãƒ„ãƒ¼ãƒ« [æœ€çµ‚å½¢æ…‹] ğŸŒ€</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #000; color: #0f0; padding: 20px; }
    .container { max-width: 1100px; margin: auto; background: #111; padding: 30px; border-radius: 15px; border: 2px solid #0f0; box-shadow: 0 0 30px #0f0; }
    h1 { text-align: center; color: #0f0; text-shadow: 0 0 10px #0f0; }
    textarea { width: 100%; height: 200px; background: #000; color: #0f0; border: 1px solid #0f0; border-radius: 8px; padding: 12px; font-family: 'Courier New', monospace; }
    .options { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin: 20px 0; background: #0a0a0a; padding: 15px; border-radius: 10px; }
    label { display: flex; align-items: center; gap: 8px; cursor: pointer; color: #0f0; }
    button { padding: 14px 28px; font-size: 18px; background: #003300; color: #0f0; border: 2px solid #0f0; border-radius: 8px; cursor: pointer; }
    button:hover { background: #006600; box-shadow: 0 0 20px #0f0; }
    #output { background: #000; padding: 15px; border: 1px solid #0f0; border-radius: 8px; margin-top: 20px; white-space: pre-wrap; word-break: break-all; min-height: 200px; color: #0f0; }
    .layer-control { text-align: center; margin: 20px 0; }
    .layer-control input { width: 300px; }
    .stats { color: #00ff00; font-weight: bold; text-align: center; font-size: 18px; margin: 15px 0; text-shadow: 0 0 10px #0f0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸŒ€ ä¿ºã®å¤šå±¤åœ°ç„JavaScripté›£èª­åŒ–ãƒ„ãƒ¼ãƒ« [æœ€çµ‚å½¢æ…‹] ğŸŒ€</h1>
    <p style="text-align:center;color:#0f0;">æœ€å¤§10å±¤ã¾ã§é‡ã­ãŒã‘å¯èƒ½ â†’ äººé–“ã®ç†è§£ã‚’è¶…ãˆã‚‹</p>

    <textarea id="input" placeholder="// ã“ã“ã«çŠ ç‰²ã«ãªã‚‹JSã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘..."></textarea>

    <div class="layer-control">
      <h3 style="color:#0f0;">é‡ã­ãŒã‘å±¤æ•°: <span id="layerVal">1</span> å±¤</h3>
      <input type="range" id="layers" min="1" max="10" value="3" step="1">
      <br><br>
      <button onclick="obfuscateMulti()">ğŸŒªï¸ åœ°ç„ã®å¤šå±¤é›£èª­åŒ– é–‹å§‹ ğŸŒªï¸</button>
      <button onclick="copy()" style="background:#660000;">ğŸ“‹ ã‚³ãƒ”ãƒ¼ï¼ˆè¦šæ‚Ÿã—ã‚ï¼‰</button>
    </div>

    <div class="options">
      <label><input type="checkbox" id="renameVars" checked> å¤‰æ•°å16é€²ã‚´ãƒŸåŒ–</label>
      <label><input type="checkbox" id="hexEncode" checked> \x çˆ†æ’ƒ</label>
      <label><input type="checkbox" id="unicodeEscape" checked> \u çˆ†æ’ƒ</label>
      <label><input type="checkbox" id="deadCode" checked> ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰æ³¨å…¥ (<span id="deadVal">6</span> <input type="range" id="deadAmount" min="1" max="10" value="6">)</label>
      <label><input type="checkbox" id="numberObf" checked> æ•°å€¤ã‚´ãƒŸå¼åŒ–</label>
      <label><input type="checkbox" id="controlFlow" checked> åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ç ´å£Š</label>
      <label><input type="checkbox" id="wrapEval" checked> evalã§åŒ…ã‚€ï¼ˆæ¯å±¤ï¼‰</label>
      <label><input type="checkbox" id="antiDebug" checked> ã‚¢ãƒ³ãƒãƒ‡ãƒãƒƒã‚°</label>
      <label><input type="checkbox" id="selfDefend" checked> è‡ªå·±é˜²å¾¡ï¼ˆæ”¹è¡Œç¦æ­¢ï¼‰</label>
      <label><input type="checkbox" id="randomJunk" checked> ãƒ©ãƒ³ãƒ€ãƒ ã‚´ãƒŸæ–‡å­—åˆ—è¿½åŠ </label>
    </div>

    <div class="stats">
      å‡¦ç†å‰: <span id="sizeBefore">0</span> æ–‡å­— â†’ 
      å‡¦ç†å¾Œ: <span id="sizeAfter">0</span> æ–‡å­— 
      ï¼ˆ<span id="ratio">0</span>å€ / <span id="layerDisplay">0</span>å±¤ï¼‰
    </div>

    <h3 style="color:#0f0;text-align:center;">çµæœï¼ˆã‚‚ã†äººé¡ã«ã¯èª­ã‚ãªã„ï¼‰ï¼š</h3>
    <pre id="output"></pre>
  </div>

<script>
// ============ åœ°ç„ã®å¤šå±¤é›£èª­åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ ============
let finalCode = "";

function obfuscateOnce(code) {
  const opts = {
    renameVars: document.getElementById('renameVars').checked,
    hexEncode: document.getElementById('hexEncode').checked,
    unicodeEscape: document.getElementById('unicodeEscape').checked,
    deadCode: document.getElementById('deadCode').checked,
    deadAmount: parseInt(document.getElementById('deadAmount').value),
    numberObf: document.getElementById('numberObf').checked,
    controlFlow: document.getElementById('controlFlow').checked,
    wrapEval: document.getElementById('wrapEval').checked,
    antiDebug: document.getElementById('antiDebug').checked,
    selfDefend: document.getElementById('selfDefend').checked,
    randomJunk: document.getElementById('randomJunk').checked,
  };

  let result = code;

  // æ¯å±¤ã”ã¨ã«å°‘ã—ãšã¤å¤‰ãˆã‚‹ï¼ˆåŒã˜å¤‰æ›ãŒé‡ãªã£ã¦ã‚‚èª­ã‚ãªããªã‚‹ï¼‰
  if (opts.renameVars) {
    const varMap = {}; let cnt = Math.floor(Math.random() * 1000);
    result = result.replace(/\b(var|let|const)\s+([a-zA-Z_$][\w$]*)/g, (m, k, v) => {
      if (!varMap[v]) varMap[v] = `_0x${(cnt++).toString(16)}`;
      return `${k} ${varMap[v]}`;
    });
    result = result.replace(/\b([a-zA-Z_$][\w$]*)\b/g, m => varMap[m] || m);
  }

  if (opts.numberObf) {
    result = result.replace(/\b(\d+)\b/g, () => {
      const n = Math.floor(Math.random() * 10000);
      return [`0x${n.toString(16)}`, `~-${-n-1}`, `${n}<<0`, `"${n}"|0`][Math.floor(Math.random()*4)];
    });
  }

  if (opts.hexEncode || opts.unicodeEscape) {
    result = result.replace(/"([^"]*?)"/g, (m, s) => {
      let out = '';
      for (let c of s) {
        const r = Math.random();
        if (r < 0.4 && opts.hexEncode) out += '\\x' + c.charCodeAt(0).toString(16).padStart(2,'0');
        else if (r < 0.8 && opts.unicodeEscape) out += '\\u' + c.charCodeAt(0).toString(16).padStart(4,'0');
        else out += c;
      }
      return `"${out}"`;
    });
  }

  if (opts.deadCode) {
    let junk = '';
    for (let i = 0; i < 15 + opts.deadAmount * 10; i++) {
      const v = `_d${Math.random().toString(36).substr(2,8)}`;
      junk += `var ${v}=${Math.random()*9999|0};${v}^=${v}>>>1;`;
      if (Math.random() < 0.4) junk += `while(${v}%11>10){${v}--}`;
    }
    result = junk + result;
  }

  if (opts.controlFlow) {
    result = `(()=>{var _=${Math.random().toString(36).substr(2)};while(_--){${result}}})();`;
  }

  if (opts.randomJunk) {
    const junkStr = '/*' + Math.random().toString(36).repeat(10) + '*/';
    result = junkStr + result + junkStr;
  }

  if (opts.antiDebug) result = `debugger;${result}`;
  if (opts.selfDefend) result = result.replace(/\s+/g, '') + '/*æ”¹è¡Œã—ãŸã‚‰çˆ†ç™ºã™ã‚‹*/';

  if (opts.wrapEval) {
    result = 'eval("' + result.replace(/"/g, '\\"').replace(/\n/g, '\\n') + '")';
  }

  return result;
}

// å¤šå±¤åœ°ç„å®Ÿè¡Œ
function obfuscateMulti() {
  let code = document.getElementById('input').value.trim();
  if (!code) return alert('ã‚³ãƒ¼ãƒ‰ãŒãªã„ã¨åœ°ç„ã«è½ã¨ã›ãªã„â€¦');

  const layers = parseInt(document.getElementById('layers').value);
  document.getElementById('layerDisplay').textContent = layers;
  document.getElementById('sizeBefore').textContent = code.length;

  for (let i = 1; i <= layers; i++) {
    code = obfuscateOnce(code);
    document.getElementById('output').textContent = `ğŸ”¥ ç¬¬${i}å±¤ å‡¦ç†ä¸­... (${code.length}æ–‡å­—)\n${code.substring(0, 1000)}...`;
    if (i % 2 === 0) code = code.replace(/;/g, ';/*'+Math.random()+'*/'); // ã•ã‚‰ã«æ±šã
  }

  finalCode = code;
  document.getElementById('output').textContent = finalCode;
  const ratio = (finalCode.length / document.getElementById('input').value.length).toFixed(2);
  document.getElementById('sizeAfter').textContent = finalCode.length;
  document.getElementById('ratio').textContent = ratio;
}

// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å±¤æ•°è¡¨ç¤º
document.getElementById('layers').addEventListener('input', e => {
  document.getElementById('layerVal').textContent = e.target.value;
});
document.getElementById('deadAmount').addEventListener('input', e => {
  document.getElementById('deadVal').textContent = e.target.value;
});

function copy() {
  navigator.clipboard.writeText(finalCode || document.getElementById('output').textContent);
  alert('ã‚³ãƒ”ãƒ¼å®Œäº†ã€‚ã“ã‚Œã§å›ã®ã‚³ãƒ¼ãƒ‰ã¯æ°¸é ã«è§£èª­ä¸èƒ½ã«ãªã£ãŸâ€¦');
}
</script>
</body>
</html>
