<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Base92 Encoder/Decoder</title>
<style>
  body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
  textarea { width: 100%; height: 80px; margin: 10px 0; }
  button { margin: 5px; padding: 5px 10px; }
  pre { background: #f0f0f0; padding: 10px; }
</style>
</head>
<body>
<h1>Base92 Encoder/Decoder</h1>

<label>入力テキスト:</label>
<textarea id="inputText"></textarea>

<div>
  <button onclick="encodeText()">Encode</button>
  <button onclick="decodeText()">Decode</button>
</div>

<label>結果:</label>
<pre id="outputText"></pre>

<script>
// Base92 JS Implementation (from https://github.com/urish/base92)
// 軽量化のため最低限の関数のみ
const BASE92_CHARS = (() => {
  let s = '';
  for (let i = 33; i <= 126; i++) s += String.fromCharCode(i);
  return s;
})();
function base92_encode(str) {
    let n = 0, b = 0, output = '';
    for (let i = 0; i < str.length; i++) {
        n = (n << 8) | str.charCodeAt(i);
        b += 8;
        while (b > 13) {
            let c = n >> (b-13);
            b -= 13;
            n &= (1 << b) - 1;
            output += BASE92_CHARS[Math.floor(c / 91)] + BASE92_CHARS[c % 91];
        }
    }
    if (b > 0) {
        let c = n << (13-b);
        output += BASE92_CHARS[Math.floor(c / 91)] + BASE92_CHARS[c % 91];
    }
    return output;
}
function base92_decode(str) {
    let n = 0, b = 0, output = '';
    for (let i = 0; i < str.length; i+=2) {
        let c = BASE92_CHARS.indexOf(str[i]) * 91 + BASE92_CHARS.indexOf(str[i+1]);
        n = (n << 13) | c;
        b += 13;
        while (b >= 8) {
            b -= 8;
            output += String.fromCharCode(n >> b);
            n &= (1 << b) - 1;
        }
    }
    return output;
}

// UI Handlers
function encodeText() {
    const input = document.getElementById('inputText').value;
    document.getElementById('outputText').textContent = base92_encode(input);
}
function decodeText() {
    const input = document.getElementById('inputText').value;
    document.getElementById('outputText').textContent = base92_decode(input);
}
</script>

</body>
</html>
